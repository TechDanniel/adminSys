import{b0 as e,ax as l,P as a,i as t,ba as u,bb as r,bc as n,bd as o,be as s,_ as i,d,bf as m,u as p,l as c,q as v,bg as b,f,a3 as V,a2 as h,bh as x,s as y,y as N,a5 as g,V as _,o as I,F as w,aq as E,a9 as k,a as S,aP as A,X as F,r as $,w as j,c as U,n as B,bi as K,C as L,bj as O,bk as z,b8 as P,ap as T,bl as D,k as M,B as C,$ as Z,a8 as q,W as R,Z as X,a6 as Y}from"./index-B_o8siDq.js";import{a as G,E as J}from"./el-form-item-jwksQNZh.js";import{E as W}from"./el-row-BeMIhmV4.js";import{u as H,E as Q}from"./hooks-Bjqg0XHe.js";import{E as ee,i as le}from"./el-input-Cf2eIeua.js";import{E as ae}from"./el-radio-BCzj3Wry.js";import"./el-tag-BiUEjuzt.js";import"./el-checkbox-VUoa7duk.js";import"./el-scrollbar-Dkahi5v9.js";const te=100,ue=600,re={beforeMount(l,a){const t=a.value,{interval:u=te,delay:r=ue}=e(t)?{}:t;let n,o;const s=()=>e(t)?t():t.handler(),i=()=>{o&&(clearTimeout(o),o=void 0),n&&(clearInterval(n),n=void 0)};l.addEventListener("mousedown",(e=>{0===e.button&&(i(),s(),document.addEventListener("mouseup",(()=>i()),{once:!0}),o=setTimeout((()=>{n=setInterval((()=>{s()}),u)}),r))}))}},ne=t({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:s,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:e=>null===e||l(e)||["min","max"].includes(e),default:null},name:String,placeholder:String,precision:{type:Number,validator:e=>e>=0&&e===Number.parseInt(`${e}`,10)},validateEvent:{type:Boolean,default:!0},...o(["ariaLabel"])}),oe={[n]:(e,l)=>l!==e,blur:e=>e instanceof FocusEvent,focus:e=>e instanceof FocusEvent,[r]:e=>l(e)||a(e),[u]:e=>l(e)||a(e)},se=d({name:"ElInputNumber"});const ie=Z(i(d({...se,props:ne,emits:oe,setup(e,{expose:t,emit:o}){const s=e,{t:i}=m(),d=p("input-number"),Z=c(),q=v({currentValue:s.modelValue,userInput:null}),{formItem:R}=b(),X=f((()=>l(s.modelValue)&&s.modelValue<=s.min)),Y=f((()=>l(s.modelValue)&&s.modelValue>=s.max)),G=f((()=>{const e=te(s.step);return V(s.precision)?Math.max(te(s.modelValue),e):(s.precision,s.precision)})),J=f((()=>s.controls&&"right"===s.controlsPosition)),W=h(),H=x(),Q=f((()=>{if(null!==q.userInput)return q.userInput;let e=q.currentValue;if(a(e))return"";if(l(e)){if(Number.isNaN(e))return"";V(s.precision)||(e=e.toFixed(s.precision))}return e})),ae=(e,l)=>{if(V(l)&&(l=G.value),0===l)return Math.round(e);let a=String(e);const t=a.indexOf(".");if(-1===t)return e;if(!a.replace(".","").split("")[t+l])return e;const u=a.length;return"5"===a.charAt(u-1)&&(a=`${a.slice(0,Math.max(0,u-1))}6`),Number.parseFloat(Number(a).toFixed(l))},te=e=>{if(a(e))return 0;const l=e.toString(),t=l.indexOf(".");let u=0;return-1!==t&&(u=l.length-t-1),u},ue=(e,a=1)=>l(e)?ae(e+s.step*a):q.currentValue,ne=()=>{if(s.readonly||H.value||Y.value)return;const e=Number(Q.value)||0,l=ue(e);ie(l),o(r,q.currentValue),ve()},oe=()=>{if(s.readonly||H.value||X.value)return;const e=Number(Q.value)||0,l=ue(e,-1);ie(l),o(r,q.currentValue),ve()},se=(e,l)=>{const{max:t,min:r,step:n,precision:i,stepStrictly:d,valueOnClear:m}=s;t<r&&M("InputNumber","min should not be greater than max.");let p=Number(e);if(a(e)||Number.isNaN(p))return null;if(""===e){if(null===m)return null;p=C(m)?{min:r,max:t}[m]:m}return d&&(p=ae(Math.round(p/n)*n,i),p!==e&&l&&o(u,p)),V(i)||(p=ae(p,i)),(p>t||p<r)&&(p=p>t?t:r,l&&o(u,p)),p},ie=(e,l=!0)=>{var a;const t=q.currentValue,r=se(e);l?t===r&&e||(q.userInput=null,o(u,r),t!==r&&o(n,r,t),s.validateEvent&&(null==(a=null==R?void 0:R.validate)||a.call(R,"change").catch((e=>D()))),q.currentValue=r):o(u,r)},de=e=>{q.userInput=e;const l=""===e?null:Number(e);o(r,l),ie(l,!1)},me=e=>{const a=""!==e?Number(e):"";(l(a)&&!Number.isNaN(a)||""===e)&&ie(a),ve(),q.userInput=null},pe=e=>{o("focus",e)},ce=e=>{var l,a;q.userInput=null,le()&&null===q.currentValue&&(null==(l=Z.value)?void 0:l.input)&&(Z.value.input.value=""),o("blur",e),s.validateEvent&&(null==(a=null==R?void 0:R.validate)||a.call(R,"blur").catch((e=>D())))},ve=()=>{q.currentValue!==s.modelValue&&(q.currentValue=s.modelValue)},be=e=>{document.activeElement===e.target&&e.preventDefault()};return y((()=>s.modelValue),((e,l)=>{const a=se(e,!0);null===q.userInput&&a!==l&&(q.currentValue=a)}),{immediate:!0}),N((()=>{var e;const{min:a,max:t,modelValue:r}=s,n=null==(e=Z.value)?void 0:e.input;if(n.setAttribute("role","spinbutton"),Number.isFinite(t)?n.setAttribute("aria-valuemax",String(t)):n.removeAttribute("aria-valuemax"),Number.isFinite(a)?n.setAttribute("aria-valuemin",String(a)):n.removeAttribute("aria-valuemin"),n.setAttribute("aria-valuenow",q.currentValue||0===q.currentValue?String(q.currentValue):""),n.setAttribute("aria-disabled",String(H.value)),!l(r)&&null!=r){let e=Number(r);Number.isNaN(e)&&(e=null),o(u,e)}n.addEventListener("wheel",be,{passive:!1})})),g((()=>{var e,l;const a=null==(e=Z.value)?void 0:e.input;null==a||a.setAttribute("aria-valuenow",`${null!=(l=q.currentValue)?l:""}`)})),t({focus:()=>{var e,l;null==(l=null==(e=Z.value)?void 0:e.focus)||l.call(e)},blur:()=>{var e,l;null==(l=null==(e=Z.value)?void 0:e.blur)||l.call(e)}}),(e,l)=>(I(),_("div",{class:F([S(d).b(),S(d).m(S(W)),S(d).is("disabled",S(H)),S(d).is("without-controls",!e.controls),S(d).is("controls-right",S(J))]),onDragstart:T((()=>{}),["prevent"])},[e.controls?w((I(),_("span",{key:0,role:"button","aria-label":S(i)("el.inputNumber.decrease"),class:F([S(d).e("decrease"),S(d).is("disabled",S(X))]),onKeydown:A(oe,["enter"])},[$(e.$slots,"decrease-icon",{},(()=>[k(S(L),null,{default:j((()=>[S(J)?(I(),U(S(B),{key:0})):(I(),U(S(K),{key:1}))])),_:1})]))],42,["aria-label","onKeydown"])),[[S(re),oe]]):E("v-if",!0),e.controls?w((I(),_("span",{key:1,role:"button","aria-label":S(i)("el.inputNumber.increase"),class:F([S(d).e("increase"),S(d).is("disabled",S(Y))]),onKeydown:A(ne,["enter"])},[$(e.$slots,"increase-icon",{},(()=>[k(S(L),null,{default:j((()=>[S(J)?(I(),U(S(O),{key:0})):(I(),U(S(z),{key:1}))])),_:1})]))],42,["aria-label","onKeydown"])),[[S(re),ne]]):E("v-if",!0),k(S(ee),{id:e.id,ref_key:"input",ref:Z,type:"number",step:e.step,"model-value":S(Q),placeholder:e.placeholder,readonly:e.readonly,disabled:S(H),size:S(W),max:e.max,min:e.min,name:e.name,"aria-label":e.ariaLabel,"validate-event":!1,onKeydown:[A(T(ne,["prevent"]),["up"]),A(T(oe,["prevent"]),["down"])],onBlur:ce,onFocus:pe,onInput:de,onChange:me},P({_:2},[e.$slots.prefix?{name:"prefix",fn:j((()=>[$(e.$slots,"prefix")]))}:void 0,e.$slots.suffix?{name:"suffix",fn:j((()=>[$(e.$slots,"suffix")]))}:void 0]),1032,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","onKeydown"])],42,["onDragstart"]))}}),[["__file","input-number.vue"]]));const de=v({name:[{required:!0,message:"部门名称为必填项",trigger:"blur"}],phone:[{validator:(e,l,a)=>{""===l?a():/^1[3-9]\d{9}$/.test(l)?a():a(new Error("请输入正确的手机号码格式"))},trigger:"blur"}],email:[{validator:(e,l,a)=>{""===l?a():/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(l)?a():a(new Error("请输入正确的邮箱格式"))},trigger:"blur"}]}),me={key:0},pe=d({__name:"form",props:{formInline:{default:()=>({higherDeptOptions:[],parentId:0,name:"",principal:"",phone:"",email:"",sort:0,status:1,remark:""})}},setup(e,{expose:l}){const a=e,t=c(),{switchStyle:u}=H(),r=c(a.formInline);return l({getRef:function(){return t.value}}),(e,l)=>{const a=ae,n=G,o=q("re-col"),s=ee,i=ie,d=Q,m=W,p=J;return I(),U(p,{ref_key:"ruleFormRef",ref:t,model:r.value,rules:S(de),"label-width":"82px"},{default:j((()=>[k(m,{gutter:30},{default:j((()=>[k(o,null,{default:j((()=>[k(n,{label:"上级部门"},{default:j((()=>[k(a,{modelValue:r.value.parentId,"onUpdate:modelValue":l[0]||(l[0]=e=>r.value.parentId=e),class:"w-full",options:r.value.higherDeptOptions,props:{value:"id",label:"name",emitPath:!1,checkStrictly:!0},clearable:"",filterable:"",placeholder:"请选择上级部门"},{default:j((({node:e,data:l})=>[R("span",null,X(l.name),1),e.isLeaf?E("",!0):(I(),_("span",me," ("+X(l.children.length)+") ",1))])),_:1},8,["modelValue","options"])])),_:1})])),_:1}),k(o,{value:12,xs:24,sm:24},{default:j((()=>[k(n,{label:"部门名称",prop:"name"},{default:j((()=>[k(s,{modelValue:r.value.name,"onUpdate:modelValue":l[1]||(l[1]=e=>r.value.name=e),clearable:"",placeholder:"请输入部门名称"},null,8,["modelValue"])])),_:1})])),_:1}),k(o,{value:12,xs:24,sm:24},{default:j((()=>[k(n,{label:"部门负责人"},{default:j((()=>[k(s,{modelValue:r.value.principal,"onUpdate:modelValue":l[2]||(l[2]=e=>r.value.principal=e),clearable:"",placeholder:"请输入部门负责人"},null,8,["modelValue"])])),_:1})])),_:1}),k(o,{value:12,xs:24,sm:24},{default:j((()=>[k(n,{label:"手机号",prop:"phone"},{default:j((()=>[k(s,{modelValue:r.value.phone,"onUpdate:modelValue":l[3]||(l[3]=e=>r.value.phone=e),clearable:"",placeholder:"请输入手机号"},null,8,["modelValue"])])),_:1})])),_:1}),k(o,{value:12,xs:24,sm:24},{default:j((()=>[k(n,{label:"邮箱",prop:"email"},{default:j((()=>[k(s,{modelValue:r.value.email,"onUpdate:modelValue":l[4]||(l[4]=e=>r.value.email=e),clearable:"",placeholder:"请输入邮箱"},null,8,["modelValue"])])),_:1})])),_:1}),k(o,{value:12,xs:24,sm:24},{default:j((()=>[k(n,{label:"排序"},{default:j((()=>[k(i,{modelValue:r.value.sort,"onUpdate:modelValue":l[5]||(l[5]=e=>r.value.sort=e),class:"!w-full",min:0,max:9999,"controls-position":"right"},null,8,["modelValue"])])),_:1})])),_:1}),k(o,{value:12,xs:24,sm:24},{default:j((()=>[k(n,{label:"部门状态"},{default:j((()=>[k(d,{modelValue:r.value.status,"onUpdate:modelValue":l[6]||(l[6]=e=>r.value.status=e),"inline-prompt":"","active-value":1,"inactive-value":0,"active-text":"启用","inactive-text":"停用",style:Y(S(u))},null,8,["modelValue","style"])])),_:1})])),_:1}),k(o,null,{default:j((()=>[k(n,{label:"备注"},{default:j((()=>[k(s,{modelValue:r.value.remark,"onUpdate:modelValue":l[7]||(l[7]=e=>r.value.remark=e),placeholder:"请输入备注信息",type:"textarea"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"])}}});export{pe as _};
