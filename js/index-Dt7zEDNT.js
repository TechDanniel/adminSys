import{s as e,l as a,z as l,av as t,b2 as o,b3 as s,aH as n,B as i,d as r,W as m,o as p,a3 as u,w as c,a as d,aC as f,Z as _,I as h,an as g,c as y,b4 as v,al as b,$ as j,b5 as k}from"./index-Di92kVg-.js";import{j as w,d as C,E as z,c as x,e as S,h as I,f as E,_ as D}from"./add-circle-line-DNrxOMxR.js";import"./el-checkbox-B7yQgfNd.js";import"./el-tooltip-Cqo1nrH7.js";import"./el-scrollbar-CEu2sRdw.js";import{E as R}from"./el-tag-DSKcOb6W.js";import{a as V,E as $}from"./el-form-item-Djx4fugC.js";import{E as O,a as T}from"./el-select-CzlwI2Yt.js";import{E as W}from"./el-input-DdcZBZks.js";import{d as Y}from"./dayjs.min-CyDy163J.js";import{_ as F}from"./form.vue_vue_type_script_setup_true_lang-CKURr0Ey.js";import{u as M}from"./hooks-BM4A0cZ7.js";import{E as A}from"./el-divider-CtIiz4Je.js";import{u as H}from"./hooks-DfIh1ubC.js";import{_ as L}from"./_plugin-vue_export-helper-BCo6x5W8.js";import"./index-BLqJGsU7.js";import"./el-space-CQZsxoKg.js";import"./isEqual-CMs4GUR2.js";import"./castArray-hGVQffrX.js";import"./token-DWNpOE8r.js";import"./typescript-CRqm1_SZ.js";import"./el-row-BAQIrm2q.js";import"./el-radio-CzDU5RX3.js";import"./inconifyIconOffline-BMvA4OKG.js";const U={class:"main"},q=L(r({name:"SystemDept",__name:"index",setup(r){const L=a(),q=a(),{form:B,loading:J,columns:K,dataList:N,onSearch:Q,resetForm:X,openDialog:Z,handleDelete:G,handleSelectionChange:P,tagStyle:ee}=function(){const r=e({name:"",status:null}),m=a(),p=a([]),u=a(!0),{tagStyle:c}=M(),d=[{label:"部门名称",prop:"name",width:180,align:"left"},{label:"排序",prop:"sort",minWidth:70},{label:"状态",prop:"status",minWidth:100},{label:"创建时间",minWidth:200,prop:"createTime",formatter:({createTime:e})=>Y(e).format("YYYY-MM-DD HH:mm:ss")},{label:"备注",prop:"remark",minWidth:320}];async function f(){u.value=!0;const{data:e}=await w();let a=e;t.isEmpty(r.name)||(a=a.filter((e=>e.name.includes(r.name)))),t.isEmpty(r.status)||(a=a.filter((e=>e.status===r.status))),p.value=o(a),setTimeout((()=>{u.value=!1}),500)}function _(e){if(!e||!e.length)return;const a=[];for(let l=0;l<e.length;l++)e[l].disabled=0===e[l].status,_(e[l].children),a.push(e[l]);return a}return l((()=>{f()})),{form:r,loading:u,columns:d,dataList:p,onSearch:f,resetForm:function(e){e&&(e.resetFields(),f())},openDialog:function(e="新增",a){s({title:`${e}部门`,props:{formInline:{higherDeptOptions:_(n(p.value)),parentId:(null==a?void 0:a.parentId)??0,name:(null==a?void 0:a.name)??"",principal:(null==a?void 0:a.principal)??"",phone:(null==a?void 0:a.phone)??"",email:(null==a?void 0:a.email)??"",sort:(null==a?void 0:a.sort)??0,status:(null==a?void 0:a.status)??1,remark:(null==a?void 0:a.remark)??""}},width:"40%",draggable:!0,fullscreenIcon:!0,closeOnClickModal:!1,contentRender:()=>i(F,{ref:m,formInline:null}),beforeSure:(a,{options:l})=>{const t=m.value.getRef(),o=l.props.formInline;function s(){A.success(`您${e}了部门名称为${o.name}的这条数据`),a(),f()}t.validate((e=>{e&&s()}))}})},handleDelete:function(e){A.success(`您删除了部门名称为${e.name}的这条数据`),f()},handleSelectionChange:function(e){},tagStyle:c}}();function ae(){q.value.setAdaptive()}return(e,a)=>{const l=W,t=V,o=T,s=O,n=f,i=$,r=R,w=x,Y=k,F=z;return p(),m("div",U,[u(i,{ref_key:"formRef",ref:L,inline:!0,model:d(B),class:"search-form bg-bg_color w-[99/100] pl-8 pt-[12px] overflow-auto"},{default:c((()=>[u(t,{label:"部门名称：",prop:"name"},{default:c((()=>[u(l,{modelValue:d(B).name,"onUpdate:modelValue":a[0]||(a[0]=e=>d(B).name=e),placeholder:"请输入部门名称",clearable:"",class:"!w-[180px]"},null,8,["modelValue"])])),_:1}),u(t,{label:"状态：",prop:"status"},{default:c((()=>[u(s,{modelValue:d(B).status,"onUpdate:modelValue":a[1]||(a[1]=e=>d(B).status=e),placeholder:"请选择状态",clearable:"",class:"!w-[180px]"},{default:c((()=>[u(o,{label:"启用",value:1}),u(o,{label:"停用",value:0})])),_:1},8,["modelValue"])])),_:1}),u(t,null,{default:c((()=>[u(n,{type:"primary",icon:d(H)("ri:search-line"),loading:d(J),onClick:d(Q)},{default:c((()=>a[4]||(a[4]=[_(" 搜索 ")]))),_:1,__:[4]},8,["icon","loading","onClick"]),u(n,{icon:d(H)(d(C)),onClick:a[2]||(a[2]=e=>d(X)(L.value))},{default:c((()=>a[5]||(a[5]=[_(" 重置 ")]))),_:1,__:[5]},8,["icon"])])),_:1})])),_:1},8,["model"]),u(D,{title:"部门管理",columns:d(K),onRefresh:d(Q),onFullscreen:ae},{buttons:c((()=>[u(n,{type:"primary",icon:d(H)(d(I)),onClick:a[3]||(a[3]=e=>d(Z)())},{default:c((()=>a[6]||(a[6]=[_(" 新增部门 ")]))),_:1,__:[6]},8,["icon"])])),default:c((({size:e,dynamicColumns:l})=>[u(F,{ref_key:"tableRef",ref:q,loading:d(J),"table-layout":"auto","default-expand-all":"",size:e,data:d(N),"row-key":"id","header-cell-style":{background:"var(--el-fill-color-light)",color:"var(--el-text-color-primary)"},onSelectionChange:d(P)},{default:c((()=>[(p(!0),m(h,null,g(l,(a=>(p(),y(w,{key:a.prop,showOverflowTooltip:"",label:a.label,prop:a.prop,align:"center",height:"50",style:{width:"100%"}},v({_:2},["status"===a.prop?{name:"default",fn:c((({row:a})=>[u(r,{size:e,style:b(d(ee)(a.status))},{default:c((()=>[_(j(1===a.status?"启用":"停用"),1)])),_:2},1032,["size","style"])])),key:"0"}:{name:"default",fn:c((({row:e})=>[])),key:"1"}]),1032,["label","prop"])))),128)),u(w,{fixed:"right",label:"Operations","min-width":"120"},{default:c((({row:l})=>[u(n,{class:"reset-margin",link:"",type:"primary",size:e,icon:d(H)(d(S)),onClick:e=>d(Z)("修改",l)},{default:c((()=>a[7]||(a[7]=[_(" 修改 ")]))),_:2,__:[7]},1032,["size","icon","onClick"]),u(n,{class:"reset-margin",link:"",type:"primary",size:e,icon:d(H)(d(I)),onClick:e=>d(Z)("新增",{parentId:l.id})},{default:c((()=>a[8]||(a[8]=[_(" 新增 ")]))),_:2,__:[8]},1032,["size","icon","onClick"]),u(Y,{title:`是否确认删除部门名称为${l.name}的这条数据`,onConfirm:e=>d(G)(l)},{reference:c((()=>[u(n,{class:"reset-margin",link:"",type:"primary",size:e,icon:d(H)(d(E))},{default:c((()=>a[9]||(a[9]=[_(" 删除 ")]))),_:2,__:[9]},1032,["size","icon"])])),_:2},1032,["title","onConfirm"])])),_:2},1024)])),_:2},1032,["loading","size","data","onSelectionChange"])])),_:1},8,["columns","onRefresh"])])}}}),[["__scopeId","data-v-a2e72701"]]);export{q as default};
